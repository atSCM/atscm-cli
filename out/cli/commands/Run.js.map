{"version":3,"sources":["../../../src/cli/commands/Run.js"],"names":["RunCommand","constructor","name","description","arguments","options","tasks","continue","strict","run","cli","opts","_","task","T","tasksSimple","tasksJson","process","env","ATSCM_CONFIG_PATH","environment","configPath","CONTINUE_ON_FAILURE","require","modulePath","cwd","bold"],"mappings":";;;;;;AAAA;;AACA;;;;AACA;;;;AACA;;;;;;AAEA;;;AAGe,MAAMA,UAAN,2BAAiC;;AAE9C;;;;;AAKAC,cAAYC,IAAZ,EAAkBC,WAAlB,EAA+B;AAC7B,UAAMD,IAAN,EAAYC,WAAZ,EAAyB;AACvBC,iBAAW,WADY;AAEvBC,eAAS;AACPC,eAAO,kBAAWA,KADX;AAEP,wBAAgB,kBAAW,cAAX,CAFT;AAGP,sBAAc,kBAAW,YAAX,CAHP;AAIPC,kBAAU,kBAAWA;AAJd,OAFc;AAQvBC,cAAQ;AARe,KAAzB;AAUD;;AAED;;;;AAIAC,MAAIC,GAAJ,EAAS;AACP,UAAMC,OAAO;AACXC,SAAGF,IAAIL,OAAJ,CAAYQ,IAAZ,IAAoB,EADZ;AAEXP,aAAOI,IAAIL,OAAJ,CAAYS,CAFR;AAGXC,mBAAaL,IAAIL,OAAJ,CAAYU,WAHd;AAIXC,iBAAWN,IAAIL,OAAJ,CAAYW,SAJZ;AAKXT,gBAAUG,IAAIL,OAAJ,CAAYE;AALX,KAAb;;AAQAU,YAAQC,GAAR,CAAYC,iBAAZ,GAAgCT,IAAIU,WAAJ,CAAgBC,UAAhD;AACAJ,YAAQC,GAAR,CAAYI,mBAAZ,GAAkCZ,IAAIL,OAAJ,CAAYE,QAA9C;;AAEA;AACAgB,YAAQ,gCAAR,EACEZ,IADF,EAEE;AACEU,kBAAY,gBAAKX,IAAIU,WAAJ,CAAgBI,UAArB,EAAiC,gBAAjC,CADd;AAEEA,kBAAY,gBAAKd,IAAIU,WAAJ,CAAgBK,GAArB,EAA0B,mBAA1B;AAFd,KAFF,EAKK;AACDtB,mBAAa,gBAAOuB,IAAP,CAAY,kBAAZ;AADZ,KALL;AAQD;;AA7C6C;kBAA3B1B,U","file":"Run.js","sourcesContent":["import { join } from 'path';\nimport colors from 'chalk';\nimport Command from '../../lib/cli/Command';\nimport CliOptions from '../Options';\n\n/**\n * The command invoked when running \"run\".\n */\nexport default class RunCommand extends Command {\n\n  /**\n   * Creates a new {@link RunCommand} with the specified name and description.\n   * @param {string} name The command's name.\n   * @param {string} description The command's description.\n   */\n  constructor(name, description) {\n    super(name, description, {\n      arguments: '[task...]',\n      options: {\n        tasks: CliOptions.tasks,\n        'tasks-simple': CliOptions['tasks-simple'],\n        'tasks-json': CliOptions['tasks-json'],\n        continue: CliOptions.continue,\n      },\n      strict: false,\n    });\n  }\n\n  /**\n   * Runs gulp with the specified tasks.\n   * @param {AtSCMCli} cli The current Cli instance.\n   */\n  run(cli) {\n    const opts = {\n      _: cli.options.task || [],\n      tasks: cli.options.T,\n      tasksSimple: cli.options.tasksSimple,\n      tasksJson: cli.options.tasksJson,\n      continue: cli.options.continue,\n    };\n\n    process.env.ATSCM_CONFIG_PATH = cli.environment.configPath;\n    process.env.CONTINUE_ON_FAILURE = cli.options.continue;\n\n    // eslint-disable-next-line global-require\n    require('gulp-cli/lib/versioned/^4.0.0/')(\n      opts,\n      {\n        configPath: join(cli.environment.modulePath, '../Gulpfile.js'),\n        modulePath: join(cli.environment.cwd, 'node_modules/gulp'),\n      }, {\n        description: colors.bold('Available tasks:'),\n      });\n  }\n\n}\n"]}