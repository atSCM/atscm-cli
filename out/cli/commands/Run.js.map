{"version":3,"sources":["../../../src/cli/commands/Run.js"],"names":["RunCommand","Command","constructor","name","description","arguments","options","tasks","CliOptions","continue","strict","run","cli","opts","_","task","T","tasksSimple","tasksJson","process","env","ATSCM_CONFIG_PATH","environment","configPath","CONTINUE_ON_FAILURE","require","modulePath","cwd","colors","bold"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;;;AAEA;;;AAGe,MAAMA,UAAN,SAAyBC,gBAAzB,CAAiC;AAC9C;;;;;AAKAC,EAAAA,WAAW,CAACC,IAAD,EAAOC,WAAP,EAAoB;AAC7B,UAAMD,IAAN,EAAYC,WAAZ,EAAyB;AACvBC,MAAAA,SAAS,EAAE,WADY;AAEvBC,MAAAA,OAAO,EAAE;AACPC,QAAAA,KAAK,EAAEC,iBAAWD,KADX;AAEP,wBAAgBC,iBAAW,cAAX,CAFT;AAGP,sBAAcA,iBAAW,YAAX,CAHP;AAIPC,QAAAA,QAAQ,EAAED,iBAAWC;AAJd,OAFc;AAQvBC,MAAAA,MAAM,EAAE;AARe,KAAzB;AAUD;AAED;;;;;;AAIAC,EAAAA,GAAG,CAACC,GAAD,EAAM;AACP,UAAMC,IAAI,GAAG;AACXC,MAAAA,CAAC,EAAEF,GAAG,CAACN,OAAJ,CAAYS,IAAZ,IAAoB,EADZ;AAEXR,MAAAA,KAAK,EAAEK,GAAG,CAACN,OAAJ,CAAYU,CAFR;AAGXC,MAAAA,WAAW,EAAEL,GAAG,CAACN,OAAJ,CAAYW,WAHd;AAIXC,MAAAA,SAAS,EAAEN,GAAG,CAACN,OAAJ,CAAYY,SAJZ;AAKXT,MAAAA,QAAQ,EAAEG,GAAG,CAACN,OAAJ,CAAYG;AALX,KAAb;AAQAU,IAAAA,OAAO,CAACC,GAAR,CAAYC,iBAAZ,GAAgCT,GAAG,CAACU,WAAJ,CAAgBC,UAAhD;AACAJ,IAAAA,OAAO,CAACC,GAAR,CAAYI,mBAAZ,GAAkCZ,GAAG,CAACN,OAAJ,CAAYG,QAA9C,CAVO,CAYP;;AACAgB,IAAAA,OAAO,CAAC,gCAAD,CAAP,CACEZ,IADF,EAEE;AACEU,MAAAA,UAAU,EAAE,gBAAKX,GAAG,CAACU,WAAJ,CAAgBI,UAArB,EAAiC,gBAAjC,CADd;AAEEA,MAAAA,UAAU,EAAE,gBAAKd,GAAG,CAACU,WAAJ,CAAgBK,GAArB,EAA0B,mBAA1B;AAFd,KAFF,EAME;AACEvB,MAAAA,WAAW,EAAEwB,eAAOC,IAAP,CAAY,kBAAZ;AADf,KANF;AAUD;;AA9C6C","sourcesContent":["import { join } from 'path';\nimport colors from 'chalk';\nimport Command from '../../lib/cli/Command';\nimport CliOptions from '../Options';\n\n/**\n * The command invoked when running \"run\".\n */\nexport default class RunCommand extends Command {\n  /**\n   * Creates a new {@link RunCommand} with the specified name and description.\n   * @param {string} name The command's name.\n   * @param {string} description The command's description.\n   */\n  constructor(name, description) {\n    super(name, description, {\n      arguments: '[task...]',\n      options: {\n        tasks: CliOptions.tasks,\n        'tasks-simple': CliOptions['tasks-simple'],\n        'tasks-json': CliOptions['tasks-json'],\n        continue: CliOptions.continue,\n      },\n      strict: false,\n    });\n  }\n\n  /**\n   * Runs gulp with the specified tasks.\n   * @param {AtSCMCli} cli The current Cli instance.\n   */\n  run(cli) {\n    const opts = {\n      _: cli.options.task || [],\n      tasks: cli.options.T,\n      tasksSimple: cli.options.tasksSimple,\n      tasksJson: cli.options.tasksJson,\n      continue: cli.options.continue,\n    };\n\n    process.env.ATSCM_CONFIG_PATH = cli.environment.configPath;\n    process.env.CONTINUE_ON_FAILURE = cli.options.continue;\n\n    // eslint-disable-next-line global-require\n    require('gulp-cli/lib/versioned/^4.0.0/')(\n      opts,\n      {\n        configPath: join(cli.environment.modulePath, '../Gulpfile.js'),\n        modulePath: join(cli.environment.cwd, 'node_modules/gulp'),\n      },\n      {\n        description: colors.bold('Available tasks:'),\n      }\n    );\n  }\n}\n"],"file":"Run.js"}