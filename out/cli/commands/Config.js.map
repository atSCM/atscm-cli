{"version":3,"sources":["../../../src/cli/commands/Config.js"],"names":["ConfigCommand","Command","constructor","name","description","maxArguments","run","cli","process","env","ATSCM_CONFIG_PATH","environment","configPath","config","require","modulePath","ProjectConfig","default","inspect","styles","number","string","Logger","info","format","path","colors","depth","breakLength","options","project","warn","command"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;AAEA;;;AAGe,MAAMA,aAAN,SAA4BC,gBAA5B,CAAoC;AACjD;;;;;AAKAC,EAAAA,WAAW,CAACC,IAAD,EAAOC,WAAP,EAAoB;AAC7B,UAAMD,IAAN,EAAYC,WAAZ,EAAyB;AACvBC,MAAAA,YAAY,EAAE;AADS,KAAzB;AAGD;AAED;;;;;;AAIAC,EAAAA,GAAG,CAACC,GAAD,EAAM;AACPC,IAAAA,OAAO,CAACC,GAAR,CAAYC,iBAAZ,GAAgCH,GAAG,CAACI,WAAJ,CAAgBC,UAAhD;AAEA;;AACA,UAAMC,MAAM,GACVC,OAAO,CAACP,GAAG,CAACI,WAAJ,CAAgBI,UAAjB,CAAP,CAAoCC,aAApC,IACAF,OAAO,CAACP,GAAG,CAACI,WAAJ,CAAgBC,UAAjB,CAAP,CAAoCK,OAFtC;AAGA;;;AAEAC,kBAAQC,MAAR,CAAeC,MAAf,GAAwB,SAAxB;AACAF,kBAAQC,MAAR,CAAeE,MAAf,GAAwB,MAAxB;;AAEAC,oBAAOC,IAAP,CACE,kBADF,EAEED,gBAAOE,MAAP,CAAcC,IAAd,CAAmBlB,GAAG,CAACI,WAAJ,CAAgBC,UAAnC,CAFF,EAGG,KAAI,mBAAQC,MAAR,EAAgB;AAAEa,MAAAA,MAAM,EAAE,IAAV;AAAgBC,MAAAA,KAAK,EAAE,IAAvB;AAA6BC,MAAAA,WAAW,EAAE;AAA1C,KAAhB,CAA+D,EAHtE;;AAMA,QAAIrB,GAAG,CAACsB,OAAJ,CAAYC,OAAZ,IAAuBjB,MAAM,CAACV,IAAP,KAAgB,eAA3C,EAA4D;AAC1DmB,sBAAOS,IAAP,CAAY,gEAAZ;;AACAT,sBAAOC,IAAP,CAAY,KAAZ,EAAmBD,gBAAOE,MAAP,CAAcQ,OAAd,CAAsB,cAAtB,CAAnB,EAA0D,iCAA1D;AACD;AACF;;AAtCgD","sourcesContent":["import { inspect } from 'util';\nimport Logger from '../../lib/util/Logger';\nimport Command from '../../lib/cli/Command';\n\n/**\n * The command invoked when running \"config\".\n */\nexport default class ConfigCommand extends Command {\n  /**\n   * Creates a new {@link ConfigCommand} with the specified name and description.\n   * @param {string} name The command's name.\n   * @param {string} description The command's description.\n   */\n  constructor(name, description) {\n    super(name, description, {\n      maxArguments: 0,\n    });\n  }\n\n  /**\n   * Prints the project's configuration.\n   * @param {AtSCMCli} cli The current Cli instance.\n   */\n  run(cli) {\n    process.env.ATSCM_CONFIG_PATH = cli.environment.configPath;\n\n    /* eslint-disable global-require */\n    const config =\n      require(cli.environment.modulePath).ProjectConfig ||\n      require(cli.environment.configPath).default;\n    /* eslint-enable global-require */\n\n    inspect.styles.number = 'magenta';\n    inspect.styles.string = 'cyan';\n\n    Logger.info(\n      'Configuration at',\n      Logger.format.path(cli.environment.configPath),\n      `\\n${inspect(config, { colors: true, depth: null, breakLength: 0 })}`\n    );\n\n    if (cli.options.project && config.name !== 'ProjectConfig') {\n      Logger.warn('Overriding runtime configuration requires atscm version >= 0.4');\n      Logger.info('Run', Logger.format.command('atscm update'), 'to update to the newest version');\n    }\n  }\n}\n"],"file":"Config.js"}